<?php
echo $this->UIPageTitleFormatter($this->navigation('navigation')->findActive('navigation')['page']->label);
$productId = 0;
$form->setAttribute('action', $this->url('business-admin/products', array('action' => 'add')));
$form->setAttributes(array('class' => 'form-horizontal'));
$form->prepare();

if (strlen($errorMessage)) {
    echo '<div class = "bs-component"><div class = "alert alert-dismissible alert-danger"><button type = "button" class = "close" data-dismiss = "alert">Ã—</button>';
    echo '<span class="bold">' . $errorMessage . '</span>';
    echo '</div></div>';
}

echo $this->form()->openTag($form)
?>

<div class="well bs-component">

    <fieldset>

        <?php echo $this->formHidden($form->get('ProductID')) ?>

        <div class="form-group">
            <label class="col-md-2 control-label" for="ProductName">Product Name:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('ProductName')); ?>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="SKU">SKU:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('SKU')); ?>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="CollectionID">Collection:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('CollectionID')); ?>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="ProductTypeID">Product Type:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('ProductTypeID')); ?>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="Strands">Strands:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('Strands')->setValue(1)); ?>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="IntroDate">Date Introduced:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('IntroDate')->setValue(date('Y-m-d'))); ?>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="MinsToBuild">Mins To Build:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('MinsToBuild')->setValue(1)); ?>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="QtyOrderedLastPeriod">Sold Last Period:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('QtyOrderedLastPeriod')->setValue(0)); ?>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="ImagePath">Image URL:</label>
            <div class="col-md-9">
                <?php echo $this->formRow($form->get('ImagePath')); ?>
            </div>
            <div class="col-md-1">
                <a href="#" title="View image">
                    <img src="<?php echo $currentUrl; ?>" id="imageUrlThumb" class="img-thumbnail"  />
                </a>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="CurrentURL">Current URL:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('CurrentURL')); ?>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label" for="OldURL">Old URL:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('OldURL')); ?>
            </div>
        </div>

        <div class="form-group" id="DescBlock">
            <label class="col-md-2 control-label" for="Description">Description:</label>
            <div class="col-md-10">
                <?php echo $this->formRow($form->get('Description')); ?>
            </div>
            <div class="col-md-10 col-md-offset-2">
                <div class="pull-left margin-left-10">
                    <div class="radio radio-danger pull-left">
                        <input name="DescriptionStatus" id="DescRadio1" value="0" type="radio" checked="checked" />
                        <label for="DescRadio1">
                            <span class="label label-danger">Needs Description</span>
                        </label>
                    </div>
                </div>
                <div class="pull-left margin-left-10">
                    <div class="radio radio-warning pull-left margin-left-10">
                        <input name="DescriptionStatus" id="DescRadio2" value="1" type="radio" />
                        <label for="DescRadio2">
                            <span class="label label-default">Pending Approval</span>
                        </label>
                    </div>
                </div>
                <div class="pull-left margin-left-10">
                    <div class="radio radio-success">
                        <input name="DescriptionStatus" id="DescRadio3" value="2" type="radio" />
                        <label for="DescRadio3">
                            <span class="label label-default">Approved</span>
                        </label>
                    </div>
                </div>

            </div>
        </div>

        <div class="form-group">

            <label class="col-md-2 control-label" for="Description">Options:</label>

            <div class="col-md-10">

                <div class="row" id="optionsBlock">

                    <div class="col-md-2">
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('KeyPiece')); ?>
                            <label for="KeyPiece">
                                <span class="label label-default">Key Piece</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('Accessories')); ?>
                            <label for="Accessories">
                                <span class="label label-default">Accessories</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('Friendship')); ?>
                            <label for="Friendship">
                                <span class="label label-default">Friendship</span>
                            </label>
                        </div>
                    </div>

                    <div class="col-md-2">
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('Stacks')); ?>
                            <label for="Stacks">
                                <span class="label label-default">Stacks</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('PremiumStacks')); ?>
                            <label for="PremiumStacks">
                                <span class="label label-default">Premium Stacks</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('Charm')); ?>
                            <label for="Charm">
                                <span class="label label-default">Charm</span>
                            </label>
                        </div>
                    </div>

                    <div class="col-md-2">
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('Gold')); ?>
                            <label for="Gold">
                                <span class="label label-default">Gold</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('SterlingSilver')); ?>
                            <label for="SterlingSilver">
                                <span class="label label-default">SterlingSilver</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('Personalisable')); ?>
                            <label for="Personalisable">
                                <span class="label label-default">Personalisable</span>
                            </label>
                        </div>
                    </div>

                    <div class="col-md-2">
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('Engraved')); ?>
                            <label for="Engraved">
                                <span class="label label-default">Engraved</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('Weddings')); ?>
                            <label for="Weddings">
                                <span class="label label-default">Weddings</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('Birthdays')); ?>
                            <label for="Birthdays">
                                <span class="label label-default">Birthdays</span>
                            </label>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('RequiresAssay')); ?>
                            <label for="RequiresAssay">
                                <span class="label label-default">Requires Assay</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('ExcludeFromTrade')); ?>
                            <label for="ExcludeFromTrade">
                                <span class="label label-default">Exclude Trade</span>
                            </label>
                        </div>
                        <div class="checkbox checkbox-success">
                            <?php echo $this->formRow($form->get('PartOfTradePack')); ?>
                            <label for="PartOfTradePack">
                                <span class="label label-default">Trade Pack Quantity</span>
                            </label>

                        </div>
                        <?php echo $this->formRow($form->get('QtyInTradePack')->setValue(0)); ?>
                    </div>

                </div>

            </div>

        </div>


    </fieldset>

    <!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --->
    <div id="anchorRawMaterials"></div>
    <fieldset>
        <legend>Raw Materials</legend>
        <?php echo $this->partial('annie-haak/partial/productsRawMaterialsManager.phtml', array('productId' => $productId)); ?>
    </fieldset>

    <!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --->
    <div id="anchorLabour"></div>
    <fieldset>
        <legend>Labour</legend>
        <?php echo $this->partial('annie-haak/partial/productsLabourManager.phtml', array('productId' => $productId)); ?>
    </fieldset>

    <!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --->
    <div id="anchorDispatch"></div>
    <fieldset>
        <legend>Dispatch</legend>
        <?php
        echo $this->partial('annie-haak/partial/productsDispatchManager.phtml', array(
            'packageAndDispatchUnitCost' => $ratesPercentages['PackageAndDispatchUnitCost']
        ));
        ?>
    </fieldset>

    <!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --->
    <div id="anchorPackaging"></div>
    <fieldset>
        <legend>Packaging</legend>
        <?php echo $this->partial('annie-haak/partial/productsPackagingManager.phtml', array('productId' => $productId)); ?>
    </fieldset>

    <!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --->

    <fieldset>
        <legend>Financials</legend>
        <?php echo $this->partial('annie-haak/partial/productsFinancials.phtml'); ?>
    </fieldset>

    <div class="form-group">
        <div class="col-md-3 col-md-offset-9">
            <a href="/business-admin/raw-material-types" type="reset" class="btn btn-default">Cancel</a>
            <?php echo $this->formSubmit($form->get('submit')); ?>
        </div>
    </div>

    <!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --->

    <?php
    echo $this->partial('annie-haak/partial/productsModals.phtml', array(
        'Name' => $form->get('Name'),
        'NameCharm' => $form->get('NameCharm'),
        'NameCrystal' => $form->get('NameCrystal'),
        'NameColour' => $form->get('NameColour'),
        'NameLength' => $form->get('NameLength')
    ));
    ?>

    <!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --->

    <?php echo $this->form()->closeTag(); ?>

</div>
